"use strict";(self.webpackChunkgdp_front=self.webpackChunkgdp_front||[]).push([[235],{6235:(P,p,a)=>{a.r(p),a.d(p,{AgentsModule:()=>y});var l=a(6895),u=a(9450),t=a(4650),h=a(529),m=a(9646),g=a(8505),d=a(262),f=a(4004);let A=(()=>{class n{constructor(){this.messages=[]}add(e){this.messages.push(e)}clear(){this.messages=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b=(()=>{class n{constructor(e,o){this.http=e,this.messageService=o,this.title="Liste des agents",this.agentsUrl="http://localhost:3003/agents",this.httpOptions={headers:(new h.WM).set("Content-Type","application/json; charset=utf-8").set("Api-Key","xxx")}}getAgents(){return this.http.get(this.agentsUrl).pipe((0,g.b)(e=>this.log("fetched agents")),(0,d.K)(this.handleError("getAgents",[])))}getAgentById(e){return this.http.get(`this.agentsUrl/${e}`).pipe()}getAgentNo404(e){return this.http.get(`${this.agentsUrl}/?id=${e}`).pipe((0,f.U)(r=>r[0]),(0,g.b)(r=>{this.log(`${r?"fetched":"did not find"} agent id=${e}`)}),(0,d.K)(this.handleError(`getAgent id=${e}`)))}getAgent(e){return this.http.get(`${this.agentsUrl}/${e}`).pipe((0,g.b)(r=>this.log(`fetched agent id=${e}`)),(0,d.K)(this.handleError(`getAgent id=${e}`)))}searchAgent(e){return e.trim()?this.http.get(`${this.agentsUrl}/?name=${e}`).pipe((0,g.b)(o=>this.log(o.length?`found agents matching "${e}"`:`no agents matching "${e}"`)),(0,d.K)(this.handleError("searchAgents",[]))):(0,m.of)([])}addAgent(e){return this.http.post(this.agentsUrl,e,this.httpOptions).pipe((0,g.b)(o=>this.log(`added agent w/ id=${o._id}`)),(0,d.K)(this.handleError("addAgent")))}deleteAgent(e){const o="object"==typeof e._id?e._id.toString():e._id;return this.http.delete(`http://localhost:3003/agents/${o}`)}updateAgent(e){return this.http.put(this.agentsUrl,e,this.httpOptions).pipe((0,g.b)(o=>this.log(`updated agent id=${e._id}`)),(0,d.K)(this.handleError("updateAgent")))}handleError(e="operation",o){return r=>(console.error(r),this.log(`${e} failed: ${r.message}`),(0,m.of)(o))}log(e){this.messageService.add(`AgentService: ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(h.eN),t.LFG(A))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function v(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e," ")}}function x(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",18)(1,"div",19),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.goToAgent(s))}),t.TgZ(2,"div",20),t._UZ(3,"img",21),t.qZA(),t.TgZ(4,"div",22)(5,"div",23)(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA(),t.TgZ(10,"p")(11,"small"),t._uU(12),t.ALo(13,"date"),t.qZA()(),t.YNc(14,v,2,1,"span",13),t.qZA()()()()}if(2&n){const e=i.$implicit;t.xp6(3),t.Q6J("src",e.picture,t.LSH),t.xp6(4),t.Oqu(e.firstname),t.xp6(2),t.Oqu(e.lastname),t.xp6(3),t.Oqu(t.xi3(13,5,e.createdAt,"dd/MM/yyyy")),t.xp6(2),t.Q6J("ngForOf",e.formations)}}function T(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"span",24),t._uU(2),t.qZA(),t._uU(3),t.TgZ(4,"button",25),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.delete(s))}),t._uU(5,"x"),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e._id),t.xp6(1),t.hij(" ",e.firstname," ")}}function C(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",26)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"a",27),t._uU(13,"Modifier"),t.qZA()(),t.TgZ(14,"td",12)(15,"button",28),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.delete(s))}),t._uU(16,"Supprimer"),t.qZA()()()}if(2&n){const e=i.$implicit;t.xp6(2),t.hij(" ",e._id," "),t.xp6(2),t.hij(" ",e.matricule," "),t.xp6(2),t.hij(" ",e.lastname," "),t.xp6(2),t.hij(" ",e.firstname," "),t.xp6(2),t.hij(" ",e.tel," "),t.xp6(2),t.MGl("href","../agents/",e._id,"/",t.LSH)}}function M(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"h2"),t._uU(2,"Mes agents"),t.qZA(),t.TgZ(3,"div",6),t.YNc(4,x,15,8,"div",7),t.qZA(),t.TgZ(5,"div")(6,"label",8),t._uU(7,"agents name: "),t.qZA(),t._UZ(8,"input",9,10),t.TgZ(10,"button",11),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(9);return t.oxw().add(r.value),t.KtG(r.value="")}),t._uU(11," Add agent "),t.qZA()(),t.TgZ(12,"ul",12),t.YNc(13,T,6,2,"li",13),t.qZA(),t.TgZ(14,"table",14)(15,"thead",15)(16,"tr")(17,"th"),t._uU(18,"id"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Matricule"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Nom"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Prenom"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Tel"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Modifier"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Supprimer"),t.qZA()()(),t._UZ(31,"tr",16),t.YNc(32,C,17,6,"tr",17),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.agents),t.xp6(9),t.Q6J("ngForOf",e.agents),t.xp6(19),t.Q6J("ngForOf",e.agents)}}function U(n,i){1&n&&(t.TgZ(0,"div",29)(1,"form",30)(2,"fieldset")(3,"legend"),t._uU(4,"Cr\xe9ation d'un agent"),t.qZA(),t.TgZ(5,"table")(6,"div",31)(7,"div",32)(8,"tr")(9,"td"),t._uU(10," ID : "),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"input",33),t.qZA()(),t.TgZ(13,"tr")(14,"td"),t._uU(15,"Matricule : "),t.qZA(),t.TgZ(16,"td")(17,"div",34)(18,"span",35),t._uU(19,"A"),t.qZA(),t._UZ(20,"input",36)(21,"span",37),t.qZA()()(),t.TgZ(22,"tr")(23,"td"),t._uU(24,"Nom : "),t.qZA(),t.TgZ(25,"td"),t._UZ(26,"input",38),t.qZA()(),t.TgZ(27,"tr")(28,"td"),t._uU(29,"Prenom : "),t.qZA(),t.TgZ(30,"td"),t._UZ(31,"input",39),t.qZA()(),t.TgZ(32,"tr")(33,"td"),t._uU(34,"Date de naissance : "),t.qZA(),t.TgZ(35,"td"),t._UZ(36,"input",40),t.qZA()(),t.TgZ(37,"tr")(38,"td"),t._uU(39,"Adresse : "),t.qZA(),t.TgZ(40,"td"),t._UZ(41,"input",41),t.qZA()(),t.TgZ(42,"tr")(43,"td"),t._uU(44,"Code Postal : "),t.qZA(),t.TgZ(45,"td"),t._UZ(46,"input",42),t.qZA()(),t.TgZ(47,"tr")(48,"td"),t._uU(49,"T\xe9l\xe9phone : "),t.qZA(),t.TgZ(50,"td"),t._UZ(51,"input",43),t.qZA()(),t.TgZ(52,"div",44)(53,"tr")(54,"td"),t._UZ(55,"input",45),t.qZA(),t.TgZ(56,"td"),t._uU(57," \xa0"),t._UZ(58,"input",46),t.qZA()()()()()()()()())}let _=(()=>{class n{constructor(e){this.agentService=e,this.agents=[],this.showMe=!1}ngOnInit(){this.getAgents()}getAgents(){this.agentService.getAgents().subscribe(e=>{this.agents=e.filter(o=>!o.deletedAt),console.log("Agents filtr\xe9s :",this.agents)})}goToAgent(e){}add(e){(e=e.trim())&&this.agentService.addAgent({firstname:e}).subscribe(o=>{this.agents.push(o)})}delete(e){this.agents=this.agents.filter(o=>o!==e),this.agentService.deleteAgent(e).subscribe()}toogleTag(){this.showMe=!this.showMe}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-agents"]],decls:7,vars:3,consts:[[1,"m-3"],["aria-hidden","true",1,"fa-solid","fa-user"],["type","button",1,"add-button","m-4",3,"click"],["class","m-4","id","container-table",4,"ngIf"],["class","container-lg","id","form",4,"ngIf"],["id","container-table",1,"m-4"],[1,"row"],["class","col m4 s6",4,"ngFor","ngForOf"],["for","new-agent"],["id","new-agent"],["agentName",""],["type","button",1,"add-button",3,"click"],[1,"agents"],[4,"ngFor","ngForOf"],["border","1",1,"table","table-responsive","table-light","table-hover","table-sm"],[1,"thead-light"],["data-href","agents.php?id=' . $Infos['id'] . '",1,"table-row"],["class","clickable-row","data-href","url://agents.php?id=' . $Infos['id'] . '",4,"ngFor","ngForOf"],[1,"col","m4","s6"],["agentsBorderCard","",1,"card","horizontal",3,"click"],[1,"card-image"],[1,"avatar",3,"src"],[1,"card-stacked"],[1,"card-content"],[1,"badge"],["type","button","title","delete agent",1,"delete",3,"click"],["data-href","url://agents.php?id=' . $Infos['id'] . '",1,"clickable-row"],[1,"link-light","badge","bg-primary","rounded-pill",3,"href"],["type","button","title","delete agent",1,"agent-delete",3,"click"],["id","form",1,"container-lg"],["action","/agents/create","method","POST"],[1,"input-group","mb-3"],[1,"m-1"],["type","text","name","id","value","",1,"form-control","m-1"],[1,"input-group","m-1"],["id","basic-addon1",1,"input-group-text"],["type","text","maxlength","50","name","matricule","id","matricule","autofocus","","placeholder","Obligatoire","value","",1,"form-control","m-1"],["id","spanChiffre"],["type","text","maxlength","50","name","lastname","placeholder","Obligatoire","value","","id","lastname",1,"form-control","m-1"],["type","text","maxlength","50","name","firstname","placeholder","Obligatoire","value","","id","firstname",1,"form-control","m-1"],["type","date","maxlength","50","name","birthday","value","",1,"form-control","m-1"],["type","text","maxlength","50","name","adresse","placeholder","Adresse","value","",1,"form-control","m-1"],["type","text","maxlength","50","name","cp","placeholder","Code Postal","value","",1,"form-control","m-1"],["type","text","maxlength","50","name","tel","placeholder","T\xe9l\xe9phone","value","",1,"form-control","m-1"],[1,"button-group","m-3"],["type","reset","name","bInit","value","R\xe9initialiser",1,"btn","bg-danger","m-1","text-white"],["type","submit","name","bAjoutAgent","id","bAjoutAgent","value","Ajouter",1,"btn","btn-primary","m-1"]],template:function(e,o){1&e&&(t.TgZ(0,"h1",0),t._UZ(1,"i",1),t._uU(2," Liste des agents "),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.toogleTag()}),t._uU(4),t.qZA(),t.YNc(5,M,33,3,"div",3),t.YNc(6,U,59,0,"div",4)),2&e&&(t.xp6(4),t.hij(" ",o.showMe?"Retour":"Ajouter","\n"),t.xp6(1),t.Q6J("ngIf",!o.showMe),t.xp6(1),t.Q6J("ngIf",o.showMe))},dependencies:[l.sg,l.O5,l.uU],styles:[".agents[_ngcontent-%COMP%]{margin:0 0 2em;list-style-type:none;padding:0;width:15em}input[_ngcontent-%COMP%]{display:block;width:100%;padding:.5rem;margin:1rem 0;box-sizing:border-box}.agents[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer}.agents[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{left:.1em}.agents[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#333;text-decoration:none;background-color:#eee;margin:.5em;padding:.3em 0;height:1.6em;border-radius:4px;display:block;width:100%}.agents[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#2c3a41;background-color:#e6e6e6}.agents[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{background-color:#525252;color:#fafafa}.agents[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#405061;line-height:1em;position:relative;left:-1px;top:-4px;height:1.8em;min-width:16px;text-align:right;margin-right:.8em;border-radius:4px 0 0 4px}.add-button[_ngcontent-%COMP%]{padding:.5rem 1.5rem;font-size:1rem;margin-bottom:2rem}.add-button[_ngcontent-%COMP%]:hover{color:#fff;background-color:#42545c}.delete[_ngcontent-%COMP%]{position:absolute;left:210px;top:5px;background-color:#fff;color:#525252;font-size:1.1rem;margin:0;padding:1px 10px 3px}.delete[_ngcontent-%COMP%]:hover{background-color:#525252;color:#fff}.card-image[_ngcontent-%COMP%]{margin:auto}.avatar[_ngcontent-%COMP%]{margin:10px;height:100px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.75rem;text-align:left;vertical-align:middle;border-top:1px solid #dee2e6}th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:600}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2f2}tr[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.clickable-row[_ngcontent-%COMP%]{cursor:pointer}.agent-delete[_ngcontent-%COMP%]{color:red}.link-light[_ngcontent-%COMP%]{text-decoration:none}.badge[_ngcontent-%COMP%]{padding:.5rem;border-radius:.25rem}.bg-primary[_ngcontent-%COMP%]{background-color:#007bff}.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545}.rounded-pill[_ngcontent-%COMP%]{border-radius:50rem!important}"]}),n})();const O=[{path:"",component:_},{path:":id",component:_}];let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.Bz.forChild(O),u.Bz]}),n})(),y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,q]}),n})()}}]);